<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encrypted File Vault - Cybersecurity Project</title>
    <style>
        /* Import professional fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');
        
        /* CSS Reset and Base Styles */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* GitHub Dark Theme Colors */
        :root {
            --gh-bg: #0d1117;
            --gh-bg-secondary: #161b22;
            --gh-bg-tertiary: #21262d;
            --gh-border: #30363d;
            --gh-border-secondary: #21262d;
            --gh-text-primary: #f0f6fc;
            --gh-text-secondary: #c9d1d9;
            --gh-text-muted: #8b949e;
            --gh-accent: #58a6ff;
            --gh-accent-hover: #79c0ff;
            --gh-success: #56d364;
            --gh-warning: #d29922;
            --gh-danger: #f85149;
            --gh-code-bg: #161b22;
            --gh-code-border: #30363d;
        }
        
        /* Base Styles */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--gh-text-primary);
            background: var(--gh-bg);
            min-height: 100vh;
            padding: 16px;
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.25;
            margin-bottom: 16px;
        }
        
        h1 {
            font-size: 2.25rem;
            font-weight: 700;
        }
        
        h2 {
            font-size: 1.875rem;
            border-bottom: 1px solid var(--gh-border);
            padding-bottom: 8px;
            margin-top: 48px;
            margin-bottom: 24px;
        }
        
        h3 {
            font-size: 1.5rem;
            margin-top: 32px;
            margin-bottom: 16px;
        }
        
        h4 {
            font-size: 1.25rem;
            margin-top: 24px;
            margin-bottom: 12px;
        }
        
        p {
            margin-bottom: 16px;
            color: var(--gh-text-secondary);
            line-height: 1.7;
        }
        
        /* Links */
        a {
            color: var(--gh-accent);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--gh-accent-hover);
            text-decoration: underline;
        }
        
        /* Lists */
        ul, ol {
            margin-left: 24px;
            margin-bottom: 16px;
            color: var(--gh-text-secondary);
        }
        
        li {
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        /* Code */
        code {
            font-family: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.875rem;
            background: var(--gh-code-bg);
            border: 1px solid var(--gh-code-border);
            border-radius: 6px;
            padding: 2px 6px;
            color: var(--gh-text-primary);
        }
        
        pre {
            background: var(--gh-code-bg);
            border: 1px solid var(--gh-code-border);
            border-radius: 8px;
            padding: 16px;
            overflow-x: auto;
            margin: 16px 0;
            font-family: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.45;
        }
        
        pre code {
            background: none;
            border: none;
            padding: 0;
            border-radius: 0;
        }
        
        /* Container */
        .container {
            max-width: 1024px;
            margin: 0 auto;
            background: var(--gh-bg-secondary);
            border: 1px solid var(--gh-border);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }
        
        /* Header */
        .header {
            background: var(--gh-bg-tertiary);
            color: var(--gh-text-primary);
            padding: 48px 32px;
            text-align: center;
            border-bottom: 1px solid var(--gh-border);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 12px;
            font-weight: 700;
            line-height: 1.2;
            color: var(--gh-text-primary);
        }
        
        .header .subtitle {
            font-size: 1.125rem;
            opacity: 0.9;
            font-weight: 400;
            color: var(--gh-text-secondary);
        }
        
        /* Content */
        .content {
            padding: 48px 32px;
        }
        
        /* Project Cards */
        .project-card {
            background: var(--gh-bg-tertiary);
            border: 1px solid var(--gh-border);
            border-radius: 8px;
            padding: 24px;
            margin: 24px 0;
            transition: all 0.2s ease;
        }
        
        .project-card:hover {
            border-color: var(--gh-accent);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.1);
        }
        
        .project-card h3 {
            color: var(--gh-text-primary);
            margin-top: 0;
            margin-bottom: 12px;
        }
        
        .project-card p {
            color: var(--gh-text-secondary);
            margin-bottom: 16px;
        }
        
        .project-card ul {
            margin-left: 0;
            margin-bottom: 0;
        }
        
        .project-card li {
            color: var(--gh-text-secondary);
            font-size: 0.875rem;
        }
        
        /* Project Header */
        .project-header {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 16px;
            align-items: center;
        }
        
        .difficulty {
            font-size: 0.875rem;
            color: var(--gh-text-secondary);
            font-weight: 500;
        }
        
        .time {
            background: var(--gh-bg);
            color: var(--gh-text-secondary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid var(--gh-border);
        }
        
        .skills {
            background: var(--gh-bg);
            color: var(--gh-text-secondary);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid var(--gh-border);
        }
        
        /* Special Components */
        .warning {
            background: var(--gh-bg-tertiary);
            border-left: 4px solid var(--gh-warning);
            padding: 16px;
            margin: 16px 0;
            border-radius: 6px;
        }
        
        .warning strong {
            color: var(--gh-warning);
        }
        
        .security-note {
            background: var(--gh-bg-tertiary);
            border-left: 4px solid var(--gh-accent);
            padding: 16px;
            margin: 16px 0;
            border-radius: 6px;
        }
        
        .security-note strong {
            color: var(--gh-accent);
        }
        
        .tips-box {
            background: var(--gh-bg-tertiary);
            padding: 20px;
            border: 1px solid var(--gh-border);
            border-radius: 8px;
            margin: 24px 0;
        }
        
        .pitfalls-box {
            background: var(--gh-bg-tertiary);
            padding: 20px;
            border: 1px solid var(--gh-border);
            border-radius: 8px;
            margin: 24px 0;
        }
        
        .pitfalls-box .wrong {
            color: var(--gh-danger);
            font-weight: 600;
        }
        
        .pitfalls-box .right {
            color: var(--gh-success);
            font-weight: 600;
        }
        
        .learning-path {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        
        .week-card {
            background: var(--gh-bg-tertiary);
            border: 1px solid var(--gh-border);
            padding: 20px;
            border-radius: 8px;
        }
        
        .week-card h4 {
            color: var(--gh-text-primary);
            margin-top: 0;
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }
        
        .resource-card {
            background: var(--gh-bg-tertiary);
            padding: 20px;
            border: 1px solid var(--gh-border);
            border-radius: 8px;
        }
        
        .resource-card h4 {
            color: var(--gh-text-primary);
            margin-top: 0;
        }
        
        hr {
            border: none;
            height: 1px;
            background: var(--gh-border);
            margin: 32px 0;
        }
        
        /* Navigation */
        .nav {
            margin-bottom: 16px;
        }

        .nav a {
            color: var(--gh-text-secondary);
            font-size: 0.875rem;
            margin: 0 12px;
        }

        .nav a:hover {
            color: var(--gh-accent);
        }

        .home-link {
            position: absolute;
            top: 16px;
            left: 32px;
            font-size: 0.875rem;
            color: var(--gh-text-muted);
        }

        .home-link:hover {
            color: var(--gh-accent);
        }

        
        .footer {
            background: var(--gh-bg-tertiary);
            color: var(--gh-text-primary);
            padding: 32px;
            text-align: center;
            border-top: 1px solid var(--gh-border);
        }
        
        .footer p {
            color: var(--gh-text-secondary);
            margin: 4px 0;
            font-size: 0.875rem;
        }
        
        .tags {
            margin-top: 16px;
        }
        
        .tag {
            display: inline-block;
            background: var(--gh-bg);
            color: var(--gh-accent);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            margin: 4px;
            border: 1px solid var(--gh-border);
            transition: all 0.2s ease;
        }
        
        .tag:hover {
            background: var(--gh-accent);
            color: var(--gh-bg);
        }
        
        .takeaways {
            background: var(--gh-bg-tertiary);
            color: var(--gh-text-primary);
            padding: 20px;
            border: 1px solid var(--gh-border);
            border-radius: 8px;
            margin: 24px 0;
        }
        
        .takeaways h3 {
            color: var(--gh-text-primary);
            margin-top: 0;
        }
        
        .takeaways ul {
            color: var(--gh-text-primary);
        }
        
        .next-steps {
            background: var(--gh-bg-tertiary);
            border-left: 4px solid var(--gh-success);
            padding: 16px;
            margin: 24px 0;
            border-radius: 6px;
        }
        
        .next-steps ol {
            color: var(--gh-success);
        }
        
        /* Step Boxes */
        .step-box {
            background: var(--gh-bg-tertiary);
            border: 1px solid var(--gh-border);
            padding: 20px;
            margin: 16px 0;
            position: relative;
            border-radius: 8px;
        }
        
        .step-number {
            position: absolute;
            top: -10px;
            left: 20px;
            background: var(--gh-accent);
            color: var(--gh-bg);
            padding: 4px 8px;
            font-weight: bold;
            border-radius: 50%;
            font-size: 0.75rem;
        }
        
        .resource-link {
            color: var(--gh-accent);
            text-decoration: none;
            border-bottom: 1px dotted var(--gh-accent);
        }
        
        .resource-link:hover {
            border-bottom: 1px solid var(--gh-accent);
        }
        
        /* Emoji */
        .emoji {
            font-size: 1.25rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .home-link {
                position: static;
                display: block;
                margin-bottom: 8px;
            }

            body {
                padding: 8px;
                font-size: 14px;
            }
            
            .container {
                margin: 0;
                border-radius: 0;
                border-left: none;
                border-right: none;
            }
            
            .header {
                padding: 32px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header .subtitle {
                font-size: 1rem;
            }
            
            .content {
                padding: 32px 20px;
            }
            
            h1 {
                font-size: 1.875rem;
            }
            
            h2 {
                font-size: 1.5rem;
                margin-top: 32px;
            }
            
            h3 {
                font-size: 1.25rem;
                margin-top: 24px;
            }
            
            .project-card {
                padding: 20px;
                margin: 20px 0;
            }
            
            .project-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
        /* Navigation */
        .nav {
            margin-bottom: 16px;
        }

        .nav a {
            color: var(--gh-text-secondary);
            font-size: 0.875rem;
            margin: 0 12px;
        }

        .nav a:hover {
            color: var(--gh-accent);
        }

        .home-link {
            position: absolute;
            top: 16px;
            left: 32px;
            font-size: 0.875rem;
            color: var(--gh-text-muted);
        }

        .home-link:hover {
            color: var(--gh-accent);
        }

        
            .footer {
                padding: 24px 20px;
            }
            
            pre {
                font-size: 0.75rem;
                padding: 12px;
            }
            
            ul, ol {
                margin-left: 20px;
            }
            
            .step-box {
                padding: 16px;
            }
        }
        
        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.75rem;
            }
            
            .content {
                padding: 24px 16px;
            }
            
            .project-card {
                padding: 16px;
            }
            
            h2 {
                font-size: 1.25rem;
            }
            
            h3 {
                font-size: 1.125rem;
            }
        }
        
        /* Focus and Accessibility */
        a:focus,
        button:focus {
            outline: 2px solid var(--gh-accent);
            outline-offset: 2px;
        }
        
        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--gh-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gh-border);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--gh-accent);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="home-link">‚Üê Home</a>
            <h1>Encrypted File Vault</h1>
            <p class="subtitle">Build a secure file encryption system using modern cryptographic algorithms</p>
        </div>

        <div class="content">
            <div class="project-header">
                <span class="difficulty"><strong>Difficulty:</strong> ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ</span>
                <span class="time"><strong>Time:</strong> 4-5 hours</span>
                <span class="skills"><strong>Skills:</strong> Encryption, cryptography, secure storage</span>
            </div>

            <h2>Project Overview</h2>
            <p>In this project, you'll build a secure file encryption and decryption system using modern cryptographic algorithms. This teaches the fundamentals of data protection and secure file handling.</p>

            <h2>Why This Project Matters</h2>
            <p>Data encryption is fundamental to cybersecurity. With increasing data breaches and privacy concerns, encryption protects sensitive information. By building this tool, you'll learn:</p>
            <ul>
                <li>Symmetric and asymmetric encryption algorithms</li>
                <li>Key management and password-based key derivation</li>
                <li>Secure file handling practices</li>
                <li>Cryptographic best practices</li>
                <li>Protection against common cryptographic attacks</li>
            </ul>

            <h2>What You'll Build</h2>
            <p>A comprehensive file encryption system that:</p>
            <ul>
                <li>Encrypts files using AES-256 encryption</li>
                <li>Uses password-based key derivation (PBKDF2)</li>
                <li>Provides secure file decryption</li>
                <li>Includes integrity verification</li>
                <li>Handles large files efficiently</li>
                <li>Offers a user-friendly command-line interface</li>
            </ul>

            <h2>Prerequisites</h2>
            <p>Before starting, make sure you have:</p>
            <ul>
                <li>Python 3.8 or higher installed</li>
                <li>Basic understanding of cryptography concepts</li>
                <li>Familiarity with file operations in Python</li>
                <li>Some test files to encrypt/decrypt</li>
            </ul>

            <h2>Step-by-Step Implementation</h2>

            <div class="step-box">
                <div class="step-number">1</div>
                <h3>Project Setup and Dependencies</h3>
                <p>Create the project structure and install required cryptographic libraries.</p>
                <pre><code># Create project directory
mkdir encrypted-file-vault
cd encrypted-file-vault

# Create main files
touch file_vault.py
touch crypto_utils.py
touch requirements.txt

# Create test directory
mkdir test_files
echo "This is sensitive data" > test_files/secret.txt
echo "Confidential information" > test_files/private.txt</code></pre>
                <pre><code># requirements.txt
cryptography>=3.4.0    # Modern cryptographic library
bcrypt>=4.0.0          # Password hashing
argon2-cffi>=21.0.0    # Alternative KDF
getpass                # Secure password input</code></pre>
                <pre><code>pip install -r requirements.txt</code></pre>
                <p><strong>Why these libraries?</strong></p>
                <ul>
                    <li><code>cryptography</code>: Provides high-level cryptographic primitives</li>
                    <li><code>bcrypt</code>: Secure password hashing for key derivation</li>
                    <li><code>getpass</code>: Secure password input without echoing</li>
                </ul>
            </div>

            <div class="step-box">
                <div class="step-number">2</div>
                <h3>Implement Key Derivation Functions</h3>
                <p>Create secure key derivation from passwords using PBKDF2.</p>
                <pre><code>from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC
from cryptography.hazmat.backends import default_backend
import os
import base64

def derive_key(password, salt=None, key_length=32):
    """
    Derive encryption key from password using PBKDF2

    Args:
        password (str): User password
        salt (bytes): Salt for key derivation (generated if None)
        key_length (int): Desired key length in bytes

    Returns:
        tuple: (derived_key, salt_used)
    """
    if salt is None:
        salt = os.urandom(16)  # Generate random 16-byte salt

    # PBKDF2 parameters
    kdf = PBKDF2HMAC(
        algorithm=hashes.SHA256(),
        length=key_length,
        salt=salt,
        iterations=100000,  # High iteration count for security
        backend=default_backend()
    )

    key = kdf.derive(password.encode('utf-8'))
    return key, salt

def encode_salt(salt):
    """Encode salt for storage"""
    return base64.b64encode(salt).decode('utf-8')

def decode_salt(encoded_salt):
    """Decode salt from storage"""
    return base64.b64decode(encoded_salt.encode('utf-8'))

def generate_password_hash(password):
    """Generate password hash for verification"""
    import bcrypt
    return bcrypt.hashpw(password.encode('utf-8'), bcrypt.gensalt())</code></pre>
                <p><strong>Why PBKDF2?</strong> PBKDF2 is a standard key derivation function that makes brute-force attacks computationally expensive by requiring many iterations.</p>
            </div>

            <div class="step-box">
                <div class="step-number">3</div>
                <h3>Build AES Encryption Functions</h3>
                <p>Implement AES-256 encryption and decryption using authenticated encryption.</p>
                <pre><code>from cryptography.hazmat.primitives.ciphers import Cipher, algorithms, modes
from cryptography.hazmat.primitives import padding
from cryptography.exceptions import InvalidKey, InvalidTag
import secrets

def encrypt_file_aes_gcm(filepath, password):
    """
    Encrypt a file using AES-256-GCM

    Args:
        filepath (str): Path to file to encrypt
        password (str): Encryption password

    Returns:
        str: Path to encrypted file
    """
    # Derive key from password
    key, salt = derive_key(password)

    # Generate random nonce
    nonce = secrets.token_bytes(12)  # 96-bit nonce for GCM

    # Read original file
    with open(filepath, 'rb') as f:
        plaintext = f.read()

    # Create cipher
    cipher = Cipher(algorithms.AES(key), modes.GCM(nonce), backend=default_backend())
    encryptor = cipher.encryptor()

    # Encrypt data
    ciphertext = encryptor.update(plaintext) + encryptor.finalize()

    # Get authentication tag
    tag = encryptor.tag

    # Create encrypted file path
    encrypted_path = filepath + '.encrypted'

    # Write encrypted data with metadata
    with open(encrypted_path, 'wb') as f:
        # Write format version (for future compatibility)
        f.write(b'EFV1')

        # Write salt
        f.write(len(salt).to_bytes(4, 'big'))
        f.write(salt)

        # Write nonce
        f.write(len(nonce).to_bytes(4, 'big'))
        f.write(nonce)

        # Write authentication tag
        f.write(len(tag).to_bytes(4, 'big'))
        f.write(tag)

        # Write ciphertext
        f.write(ciphertext)

    return encrypted_path

def decrypt_file_aes_gcm(encrypted_filepath, password):
    """
    Decrypt a file encrypted with AES-256-GCM

    Args:
        encrypted_filepath (str): Path to encrypted file
        password (str): Decryption password

    Returns:
        str: Path to decrypted file
    """
    with open(encrypted_filepath, 'rb') as f:
        # Read format version
        version = f.read(4)
        if version != b'EFV1':
            raise ValueError("Unsupported file format")

        # Read salt
        salt_len = int.from_bytes(f.read(4), 'big')
        salt = f.read(salt_len)

        # Read nonce
        nonce_len = int.from_bytes(f.read(4), 'big')
        nonce = f.read(nonce_len)

        # Read authentication tag
        tag_len = int.from_bytes(f.read(4), 'big')
        tag = f.read(tag_len)

        # Read ciphertext
        ciphertext = f.read()

    # Derive key from password and salt
    key, _ = derive_key(password, salt)

    # Create cipher for decryption
    cipher = Cipher(algorithms.AES(key), modes.GCM(nonce, tag), backend=default_backend())
    decryptor = cipher.decryptor()

    # Decrypt data
    try:
        plaintext = decryptor.update(ciphertext) + decryptor.finalize()
    except InvalidTag:
        raise ValueError("Invalid password or corrupted file")

    # Create decrypted file path
    decrypted_path = encrypted_filepath.replace('.encrypted', '_decrypted')
    if decrypted_path == encrypted_filepath:
        decrypted_path = encrypted_filepath + '_decrypted'

    # Write decrypted data
    with open(decrypted_path, 'wb') as f:
        f.write(plaintext)

    return decrypted_path</code></pre>
                <p><strong>Why AES-GCM?</strong> AES-GCM provides both confidentiality and authenticity, preventing tampering with encrypted data.</p>
            </div>

            <div class="step-box">
                <div class="step-number">4</div>
                <h3>Add File Integrity Verification</h3>
                <p>Implement integrity checking to ensure files haven't been tampered with.</p>
                <pre><code>import hashlib

def calculate_file_hash(filepath, algorithm='sha256'):
    """
    Calculate cryptographic hash of a file

    Args:
        filepath (str): Path to file
        algorithm (str): Hash algorithm

    Returns:
        str: Hexadecimal hash
    """
    hash_func = getattr(hashlib, algorithm)()

    with open(filepath, 'rb') as f:
        for chunk in iter(lambda: f.read(4096), b""):
            hash_func.update(chunk)

    return hash_func.hexdigest()

def verify_file_integrity(original_file, decrypted_file):
    """
    Verify that decrypted file matches original

    Args:
        original_file (str): Path to original file
        decrypted_file (str): Path to decrypted file

    Returns:
        bool: True if files match
    """
    original_hash = calculate_file_hash(original_file)
    decrypted_hash = calculate_file_hash(decrypted_file)

    return original_hash == decrypted_hash

def get_file_info(filepath):
    """
    Get basic information about a file

    Args:
        filepath (str): Path to file

    Returns:
        dict: File information
    """
    import os
    from datetime import datetime

    stat = os.stat(filepath)

    return {
        'size': stat.st_size,
        'modified': datetime.fromtimestamp(stat.st_mtime).isoformat(),
        'hash_sha256': calculate_file_hash(filepath),
        'hash_md5': calculate_file_hash(filepath, 'md5')
    }</code></pre>
                <p><strong>Integrity verification:</strong> Hash comparison ensures that decryption produces the exact original file, detecting any corruption or tampering.</p>
            </div>

            <div class="step-box">
                <div class="step-number">5</div>
                <h3>Create the Main Vault Interface</h3>
                <p>Build a user-friendly command-line interface for the file vault.</p>
                <pre><code>#!/usr/bin/env python3
"""
Encrypted File Vault
A secure file encryption and decryption system
"""

import argparse
import getpass
import os
import sys
from pathlib import Path

from crypto_utils import (
    encrypt_file_aes_gcm,
    decrypt_file_aes_gcm,
    verify_file_integrity,
    get_file_info
)

def encrypt_command(args):
    """Handle file encryption"""
    if not os.path.exists(args.file):
        print(f"Error: File '{args.file}' does not exist")
        return

    # Get password securely
    if args.password:
        password = args.password
    else:
        password = getpass.getpass("Enter encryption password: ")
        confirm_password = getpass.getpass("Confirm password: ")

        if password != confirm_password:
            print("Error: Passwords do not match")
            return

    try:
        print(f"Encrypting {args.file}...")
        encrypted_file = encrypt_file_aes_gcm(args.file, password)
        print(f"‚úÖ Successfully encrypted: {encrypted_file}")

        # Show file info
        orig_info = get_file_info(args.file)
        enc_info = get_file_info(encrypted_file)

        print(f"\nOriginal file size: {orig_info['size']} bytes")
        print(f"Encrypted file size: {enc_info['size']} bytes")
        print(f"Expansion ratio: {enc_info['size']/orig_info['size']:.2f}x")

    except Exception as e:
        print(f"‚ùå Encryption failed: {e}")

def decrypt_command(args):
    """Handle file decryption"""
    if not os.path.exists(args.file):
        print(f"Error: File '{args.file}' does not exist")
        return

    if not args.file.endswith('.encrypted'):
        print("Warning: File does not have .encrypted extension")
        if not args.force:
            response = input("Continue anyway? (y/N): ")
            if response.lower() != 'y':
                return

    # Get password
    password = getpass.getpass("Enter decryption password: ")

    try:
        print(f"Decrypting {args.file}...")
        decrypted_file = decrypt_file_aes_gcm(args.file, password)
        print(f"‚úÖ Successfully decrypted: {decrypted_file}")

        # Verify integrity if original file exists
        original_file = args.file.replace('.encrypted', '')
        if os.path.exists(original_file) and not args.skip_verify:
            if verify_file_integrity(original_file, decrypted_file):
                print("‚úÖ File integrity verified - decryption successful")
            else:
                print("‚ö†Ô∏è  Warning: File integrity check failed")

    except ValueError as e:
        print(f"‚ùå Decryption failed: {e}")
    except Exception as e:
        print(f"‚ùå Unexpected error: {e}")

def info_command(args):
    """Show file information"""
    if not os.path.exists(args.file):
        print(f"Error: File '{args.file}' does not exist")
        return

    try:
        info = get_file_info(args.file)
        print(f"File: {args.file}")
        print(f"Size: {info['size']} bytes")
        print(f"Last modified: {info['modified']}")
        print(f"SHA-256: {info['hash_sha256']}")
        print(f"MD5: {info['hash_md5']}")

    except Exception as e:
        print(f"Error getting file info: {e}")

def main():
    parser = argparse.ArgumentParser(
        description="Encrypted File Vault - Secure file encryption/decryption",
        formatter_class=argparse.RawDescriptionHelpFormatter,
        epilog="""
Examples:
  # Encrypt a file
  python file_vault.py encrypt secret.txt

  # Decrypt a file
  python file_vault.py decrypt secret.txt.encrypted

  # Get file information
  python file_vault.py info secret.txt

  # Encrypt with password from command line (less secure)
  python file_vault.py encrypt secret.txt --password mypassword
        """
    )

    subparsers = parser.add_subparsers(dest='command', help='Available commands')

    # Encrypt command
    encrypt_parser = subparsers.add_parser('encrypt', help='Encrypt a file')
    encrypt_parser.add_argument('file', help='File to encrypt')
    encrypt_parser.add_argument('--password', help='Encryption password (not recommended)')

    # Decrypt command
    decrypt_parser = subparsers.add_parser('decrypt', help='Decrypt a file')
    decrypt_parser.add_argument('file', help='File to decrypt')
    decrypt_parser.add_argument('--force', action='store_true',
                               help='Force decryption of non-.encrypted files')
    decrypt_parser.add_argument('--skip-verify', action='store_true',
                               help='Skip integrity verification')

    # Info command
    info_parser = subparsers.add_parser('info', help='Show file information')
    info_parser.add_argument('file', help='File to analyze')

    args = parser.parse_args()

    if not args.command:
        parser.print_help()
        return

    if args.command == 'encrypt':
        encrypt_command(args)
    elif args.command == 'decrypt':
        decrypt_command(args)
    elif args.command == 'info':
        info_command(args)

if __name__ == "__main__":
    main()</code></pre>
                <p><strong>Command-line design:</strong> A clean CLI with subcommands makes the tool professional and easy to use in scripts and automation.</p>
            </div>

            <div class="step-box">
                <div class="step-number">6</div>
                <h3>Test Your Encrypted File Vault</h3>
                <p>Test the complete encryption and decryption system.</p>
                <pre><code># Test encryption
python file_vault.py encrypt test_files/secret.txt

# Check that encrypted file was created
ls -la test_files/

# Get info about both files
python file_vault.py info test_files/secret.txt
python file_vault.py info test_files/secret.txt.encrypted

# Test decryption
python file_vault.py decrypt test_files/secret.txt.encrypted

# Verify the decrypted file matches original
diff test_files/secret.txt test_files/secret.txt.encrypted_decrypted</code></pre>
                <p><strong>Expected behavior:</strong> Files should encrypt and decrypt successfully, with integrity verification confirming that the process is lossless.</p>
            </div>

            <h2>Enhancement Ideas</h2>
            <div class="tips-box">
                <h3>Advanced Features to Add</h3>
                <ul>
                    <li><strong>Multi-file encryption:</strong> Encrypt entire directories or multiple files at once</li>
                    <li><strong>Key file support:</strong> Use key files in addition to or instead of passwords</li>
                    <li><strong>Asymmetric encryption:</strong> Add RSA public-key encryption for secure sharing</li>
                    <li><strong>Cloud integration:</strong> Sync encrypted files to cloud storage</li>
                    <li><strong>GUI interface:</strong> Build a graphical user interface using Tkinter or PyQt</li>
                    <li><strong>Compression:</strong> Compress files before encryption to save space</li>
                    <li><strong>Secure deletion:</strong> Securely wipe original files after encryption</li>
                </ul>
            </div>

            <h2>Common Mistakes to Avoid</h2>
            <div class="pitfalls-box">
                <p><span class="wrong">‚ùå Using weak passwords for encryption</span><br>
                <span class="right">‚úÖ Use strong, unique passwords with high entropy</span></p>
                <p><span class="wrong">‚ùå Reusing the same password for multiple files</span><br>
                <span class="right">‚úÖ Use unique passwords or implement key management</span></p>
                <p><span class="wrong">‚ùå Storing passwords in plain text or weak formats</span><br>
                <span class="right">‚úÖ Use secure password input and proper key derivation</span></p>
                <p><span class="wrong">‚ùå Not verifying file integrity after decryption</span><br>
                <span class="right">‚úÖ Always verify decrypted files match the original</span></p>
                <p><span class="wrong">‚ùå Using ECB mode for AES encryption</span><br>
                <span class="right">‚úÖ Use authenticated encryption modes like GCM</span></p>
            </div>

            <h2>Resources & Further Reading</h2>
            <div class="resources-grid">
                <div class="resource-card">
                    <h4>Official Documentation</h4>
                    <ul>
                        <li><a href="https://cryptography.io/en/latest/" class="resource-link">Python Cryptography Library</a></li>
                        <li><a href="https://docs.python.org/3/library/hashlib.html" class="resource-link">Python hashlib</a></li>
                        <li><a href="https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-57pt1r5.pdf" class="resource-link">NIST Key Management Guidelines</a></li>
                    </ul>
                </div>
                <div class="resource-card">
                    <h4>Cryptography Research</h4>
                    <ul>
                        <li><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard" class="resource-link">AES Encryption Standard</a></li>
                        <li><a href="https://en.wikipedia.org/wiki/PBKDF2" class="resource-link">PBKDF2 Key Derivation</a></li>
                        <li><a href="https://blog.cryptographyengineering.com/2012/05/19/how-to-choose-authenticated-encryption/" class="resource-link">Authenticated Encryption Guide</a></li>
                    </ul>
                </div>
                <div class="resource-card">
                    <h4>Learning Resources</h4>
                    <ul>
                        <li><a href="https://tryhackme.com/room/cryptographyintro" class="resource-link">TryHackMe: Cryptography Intro</a></li>
                        <li><a href="https://www.coursera.org/learn/crypto" class="resource-link">Coursera: Cryptography I</a></li>
                        <li><a href="https://www.youtube.com/watch?v=NgAWZ2sQUR0" class="resource-link">AES Encryption Explained</a></li>
                    </ul>
                </div>
            </div>

            <h2>Security Best Practices</h2>
            <div class="security-note">
                <strong>üîê Cryptographic Best Practices:</strong>
                <ul>
                    <li>Use AES-256 with authenticated encryption modes (GCM)</li>
                    <li>Implement proper key derivation with high iteration counts</li>
                    <li>Use unique salts for each encryption operation</li>
                    <li>Never store encryption keys in plain text</li>
                    <li>Implement secure password policies</li>
                    <li>Use hardware security modules (HSM) for key storage when possible</li>
                    <li>Regularly rotate encryption keys</li>
                    <li>Implement proper key lifecycle management</li>
                </ul>
            </div>

            <h2>What You Learned</h2>
            <div class="takeaways">
                <h3>Key Takeaways</h3>
                <ul>
                    <li>Modern encryption requires both confidentiality and authenticity</li>
                    <li>Key derivation functions protect against brute-force attacks</li>
                    <li>Proper salt usage prevents rainbow table attacks</li>
                    <li>File integrity verification ensures trustworthy decryption</li>
                    <li>Security tools must handle errors gracefully</li>
                </ul>
            </div>

            <h2>Next Steps</h2>
            <div class="next-steps">
                <h3>Continue Your Learning Journey</h3>
                <ol>
                    <li>Implement asymmetric encryption with RSA</li>
                    <li>Add support for encrypting entire directories</li>
                    <li>Create a password manager integration</li>
                    <li>Study post-quantum cryptography</li>
                    <li>Explore homomorphic encryption techniques</li>
                </ol>
            </div>

            <div class="next-steps">
                <h3>Related Projects to Try Next</h3>
                <ol>
                    <li><a href="password-strength-checker.html" class="resource-link">Password Strength Checker</a> - Learn about password security</li>
                    <li><a href="secure-password-manager.html" class="resource-link">Secure Password Manager</a> - Build a complete password management system</li>
                    <li><a href="secure-chat-application.html" class="resource-link">Secure Chat Application</a> - Apply encryption to real-time communication</li>
                </ol>
            </div>
        </div>

        <div class="footer">
            <div class="nav">
                <a href="index.html">Home</a> |
                <a href="fundamentals.html">Fundamentals</a> |
                <a href="network-security.html">Network Security</a> |
                <a href="web-security.html">Web Security</a> |
                <a href="advanced-projects.html">Advanced Projects</a> |
                <a href="cybersecurity-projects-for-beginners.html">All Projects</a>
            </div>
            <p><em>Happy coding! Encryption is the foundation of digital security.</em> <span class="emoji">üîê</span></p>
            <p><strong>Project:</strong> Encrypted File Vault | <strong>Difficulty:</strong> Intermediate</p>
            <p><strong>Author:</strong> jaspreet_singh | <strong>¬©</strong> 2025</p>
            <div class="tags">
                <span class="tag">#Cybersecurity</span>
                <span class="tag">#Encryption</span>
                <span class="tag">#Cryptography</span>
                <span class="tag">#AES</span>
            </div>
        </div>
    </div>
</body>
</html>